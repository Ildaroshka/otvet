<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –±–ª–æ–∫-—Å—Ö–µ–º–∞</title>
<link rel="stylesheet" href="style.css">
<style>

</style>
</head>
<body>
<div class="screen" id="app">
    <div class="tree">
  <div class="node center">
  <div class="title">–ì–¥–µ –±–∏–∑–Ω–µ—Å —Ç–µ—Ä—è–µ—Ç –¥–µ–Ω—å–≥–∏?</div>
  <div class="subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –∑–æ–Ω—É</div>
</div>


  <div class="node marketing"
     data-hint="–ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –ø–æ–Ω–∏–º–∞—é—Ç –ø—Ä–æ–¥—É–∫—Ç, –Ω–µ –¥–æ—Ö–æ–¥—è—Ç –¥–æ –∑–∞—è–≤–∫–∏"
     onclick="startFlow('marketing')">
  üì£<br>–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥
</div>

<div class="node support"
     data-hint="–ö–ª–∏–µ–Ω—Ç—ã –ø–∏—à—É—Ç —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ –∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏"
     onclick="startFlow('support')">
  üõ†<br>–ü–æ–¥–¥–µ—Ä–∂–∫–∞
</div>

<div class="node hiring"
     data-hint="–°–ª–æ–∂–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –∏ –æ—Ç–±–∏—Ä–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤"
     onclick="startFlow('hiring')">
  üë•<br>–ù–∞–π–º
</div>

<div class="node onboarding"
     data-hint="–ù–æ–≤—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –¥–æ–ª–≥–æ –≤—Ö–æ–¥—è—Ç –≤ —Ä–∞–±–æ—Ç—É"
     onclick="startFlow('onboarding')">
  üéì<br>–û–Ω–±–æ—Ä–¥–∏–Ω–≥
</div>


</div>

<script>
const app = document.getElementById("app");

let currentFlow = null;
let step = 0;
let answers = [];
let resultType = "";

/* ====== –°–¶–ï–ù–ê–†–ò–ò ====== */
const flows = {
  marketing: {
    name: "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥",
    questions: [
      {
        text: "–ö–ª–∏–µ–Ω—Ç—ã –ø–æ–Ω–∏–º–∞—é—Ç, —á–µ–º –≤—ã –∑–∞–Ω–∏–º–∞–µ—Ç–µ—Å—å –∏ —á—Ç–æ –≤—ã –ø—Ä–æ–¥–∞—ë—Ç–µ?",
        answers: ["–î–∞", "–ù–µ—Ç"]
      },
      {
        text: "–í—ã —É–≤–µ–¥–æ–º–ª—è–µ—Ç–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ –Ω–æ–≤—ã—Ö —É—Å–ª—É–≥–∞—Ö, –∞–∫—Ü–∏—è—Ö, –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö?",
        answers: ["–î–∞", "–ò–Ω–æ–≥–¥–∞ / –ù–µ—Ç"]
      },
      {
        text: "–ß–∞—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ —Ç–µ—Ä—è–µ—Ç—Å—è –¥–æ –∑–∞—è–≤–∫–∏ –∏–ª–∏ –ø–æ–∫—É–ø–∫–∏?",
        answers: ["–î–∞", "–ù–µ—Ç"]
      }
    ]
  },

  support: {
    name: "–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞",
    questions: [
      {
        text: "–ö–ª–∏–µ–Ω—Ç—ã –ø–∏—à—É—Ç –≤–∞–º —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏?",
        answers: ["–î–∞", "–ù–µ—Ç"]
      },
      {
        text: "–í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–æ–±–ª–µ–º—ã —á–∞—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è?",
        answers: ["–î–∞", "–ù–µ—Ç"]
      },
      {
        text: "–ï—Å–ª–∏ –¥–æ–ª–≥–æ –Ω–µ –æ—Ç–≤–µ—á–∞—Ç—å ‚Äî –∫–ª–∏–µ–Ω—Ç –∑–ª–∏—Ç—Å—è –∏–ª–∏ —É—Ö–æ–¥–∏—Ç?",
        answers: ["–î–∞", "–ù–µ—Ç"]
      }
    ]
  },

  hiring: {
    name: "–ù–∞–π–º",
    questions: [
      {
        text: "–í—ã —Ä–µ–≥—É–ª—è—Ä–Ω–æ –∏—â–µ—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤?",
        answers: ["–î–∞", "–ò–Ω–æ–≥–¥–∞", "–ù–µ—Ç"]
      },
      {
        text: "–ö–∞–Ω–¥–∏–¥–∞—Ç—ã —á–∞—Å—Ç–æ –∑–∞–¥–∞—é—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –≤–æ–ø—Ä–æ—Å—ã?",
        answers: ["–î–∞", "–ù–µ—Ç"]
      },
      {
        text: "–ú–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —É—Ö–æ–¥–∏—Ç –Ω–∞ –ø–µ—Ä–≤–∏—á–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ?",
        answers: ["–î–∞", "–ù–µ—Ç"]
      }
    ]
  },

  onboarding: {
    name: "–û–Ω–±–æ—Ä–¥–∏–Ω–≥",
    questions: [
      {
        text: "–ù–æ–≤—ã–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º —Å–ª–æ–∂–Ω–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö?",
        answers: ["–î–∞", "–ù–µ—Ç"]
      },
      {
        text: "–í–≤–æ–¥ –≤ –¥–æ–ª–∂–Ω–æ—Å—Ç—å –∑–∞–Ω–∏–º–∞–µ—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏?",
        answers: ["–î–∞", "–ù–µ—Ç"]
      },
      {
        text: "–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —á–∞—Å—Ç–æ –∑–∞–¥–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã?",
        answers: ["–î–∞", "–ù–µ—Ç"]
      }
    ]
  }
};

/* ====== –°–¢–ê–†–¢ ====== */
function startFlow(type) {
    currentFlow = flows[type];
    step = 0;
    answers = [];
    renderQuestion();
}

/* ====== –í–û–ü–†–û–° ====== */
function renderQuestion() {
    const q = currentFlow.questions[step];

    app.innerHTML = `
        <h1>${q.text}</h1>
        ${q.answers.map(a => `
            <div class="panel ${a === "–î–∞" ? "yes" : "no"}"
                 onclick="answer('${a}')">${a}</div>
        `).join("")}
    `;
}

/* ====== –û–¢–í–ï–¢ ====== */
function answer(val) {
    answers.push(val);

    // —Ä–∞–Ω–Ω–∏–µ –≤—ã—Ö–æ–¥—ã –¥–ª—è –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞
    if (currentFlow.name === "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥") {
        if (step === 0 && val === "–ù–µ—Ç") {
            resultType = "bot_explain";
            return renderDiagram();
        }
        if (step === 1 && val !== "–î–∞") {
            resultType = "bot_notify";
            return renderDiagram();
        }
    }

    step++;

    step < currentFlow.questions.length
        ? renderQuestion()
        : finalize();
}

/* ====== –§–ò–ù–ê–õ ====== */
function finalize() {

    if (currentFlow.name === "–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥") {
        resultType = answers[2] === "–î–∞" ? "bot_funnel" : "human";
    }

    if (currentFlow.name === "–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞") {
        resultType = answers[2] === "–î–∞" ? "bot_support" : "human";
    }

    if (currentFlow.name === "–ù–∞–π–º") {
        resultType = answers[1] === "–î–∞" && answers[2] === "–î–∞"
            ? "bot_hr"
            : "human";
    }

    if (currentFlow.name === "–û–Ω–±–æ—Ä–¥–∏–Ω–≥") {
        resultType = answers[0] === "–î–∞"
            ? "bot_onboarding"
            : "human";
    }

    renderDiagram();
}


/* ====== –î–ò–ê–ì–†–ê–ú–ú–ê ====== */
function renderDiagram() {
    let title = "";
    let subtitle = "";
    let blockClass = "";

    const map = {
        bot_explain: ["ü§ñ –û–±—ä—è—Å–Ω—è—é—â–∏–π —á–∞—Ç-–±–æ—Ç", "–û–±—ä—è—Å–Ω—è–µ—Ç —Ü–µ–Ω–Ω–æ—Å—Ç—å —É—Å–ª—É–≥", "bot"],
        bot_notify: ["ü§ñ –ü—Ä–æ–¥–∞—é—â–∏–π —á–∞—Ç-–±–æ—Ç", "–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤", "bot"],
        bot_funnel: ["ü§ñ –ë–æ—Ç-–≤–æ—Ä–æ–Ω–∫–∞", "–í–µ–¥—ë—Ç –∫ –ø–æ–∫—É–ø–∫–µ", "bot"],
        bot_support: ["ü§ñ –°–µ—Ä–≤–∏—Å–Ω—ã–π —á–∞—Ç-–±–æ—Ç", "–û—Ç–≤–µ—á–∞–µ—Ç 24/7", "bot"],
        bot_hr: ["ü§ñ HR-—á–∞—Ç-–±–æ—Ç", "–û—Ç–±–∏—Ä–∞–µ—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã", "bot"],
        bot_onboarding: ["ü§ñ –û–Ω–±–æ—Ä–¥–∏–Ω–≥-–±–æ—Ç", "–ü–æ–º–æ–≥–∞–µ—Ç –Ω–æ–≤—ã–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è", "bot"],
        human: ["üë§ –ß–∞—Ç-–±–æ—Ç –Ω–µ –Ω—É–∂–µ–Ω", "–ü–æ–∫–∞ –º–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –≤—Ä—É—á–Ω—É—é", "human"]
    };


    [title, subtitle, blockClass] = map[resultType];

    app.innerHTML = `
      <div class="diagram">
        <div class="block client show">
          <div class="title">üë§ –ö–ª–∏–µ–Ω—Ç</div>
          <div class="subtitle">–û–±—Ä–∞—â–∞–µ—Ç—Å—è –≤ –±–∏–∑–Ω–µ—Å</div>
        </div>

        <div class="arrow"></div>

        <div class="block ${blockClass} show">
          <div class="title">${title}</div>
          <div class="subtitle">${subtitle}</div>
        </div>

        <div class="arrow"></div>

        <div class="block money show">
          <div class="title">üí∞ –†–µ–∑—É–ª—å—Ç–∞—Ç</div>
          <div class="subtitle">–ú–µ–Ω—å—à–µ –ø–æ—Ç–µ—Ä—å, –±–æ–ª—å—à–µ –¥–µ–Ω–µ–≥</div>
        </div>
      </div>

      <button class="save-btn" onclick="saveAsTxt()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <button class="restart-btn" onclick="renderStart()">üîÅ –ù–æ–≤—ã–π –ò–ü</button>
    `;
}

/* ====== –°–û–•–†–ê–ù–ï–ù–ò–ï ====== */
function saveAsTxt() {
    let text = `${currentFlow.name} ‚Äî —Ä–∞–∑–±–æ—Ä\n${new Date().toLocaleString()}\n\n`;

    currentFlow.questions.forEach((q, i) => {
        text += `${i+1}. ${q.text}\n–û—Ç–≤–µ—Ç: ${answers[i]}\n\n`;
    });

    text += `–ò—Ç–æ–≥:\n${resultType}`;

    const blob = new Blob([text], { type: "text/plain" });
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = `case_${Date.now()}.txt`;
    a.click();
}

/* ====== –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù ====== */
app.innerHTML = document.querySelector('.tree').outerHTML;



renderStart();
</script>


</body>
</html>
